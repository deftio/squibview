{"version":3,"file":"squibview.umd.js","sources":["../src/squibview.js"],"sourcesContent":["/* SquibView a live md/html/etc Editor/renderer with copy support\n supports markdown, html, and split view\n supports copying of formatted html and markdown\n supports copying of images as data urls\n supports copying of svg as png\n supports copying of tables as formatted tables\n supports copying of code blocks as formatted tables\n by deftio (c) 2024\n*/\n\nclass SquibView {\n  static defaultOptions = {\n    initialContent: '',\n    inputContentType: 'md', // 'md', 'html', 'reveal', 'csv' or 'tsv'\n    showControls: true,\n    titleShow: false,\n    titleContent: '',\n    initialView: 'split',\n    baseClass: 'squibview'\n  };\n\n  static version = {\n    version: \"0.0.27\",\n    url: \"https://github.com/deftio/squibview\"\n  };\n\n  constructor(element, options = {}) {\n    this.options = { ...SquibView.defaultOptions, ...options };\n    this.container = typeof element === 'string' ? document.querySelector(element) : element;\n\n    if (!this.container) {\n      throw new Error('Container element not found');\n    }\n\n    // Initialize undo/redo buffer we should also have a way to clear it or access an abitrary version of it\n    this.revisions = {buffer : [], index : 0};\n  \n    // iniit all the libs and \n    this.initializeLibraries();\n    this.createStructure();\n    this.initializeEventHandlers();\n    this.initializeResizeObserver();  // resize container if needed\n\n    // set content\n    if (this.options.initialContent)\n      this.setContent(this.options.initialContent, this.options.inputContentType);\n    this.setView(this.options.initialView);  // src / rendered / split\n    \n  }\n\n  initializeLibraries() {\n    mermaid.initialize({\n      startOnLoad: false,\n      securityLevel: 'loose',\n      theme: 'default',\n      errorCallback: function (error) {\n        console.warn(\"Mermaid error:\", error);\n        return \"<div class='mermaid-error'></div>\"; // Replace with custom message\n      }\n    });\n    mermaid.init(undefined, \".mermaid\");\n    this.md = window.markdownit({\n      html: true,\n      linkify: true,\n      typographer: true,\n      highlight: (str, lang) => {\n        if (lang && hljs.getLanguage(lang)) {\n          try {\n            return hljs.highlight(str, { language: lang }).value;\n          } catch (__) { }\n        }\n        return '';\n      }\n    });\n\n    const defaultFence = this.md.renderer.rules.fence ||\n      ((tokens, idx, options, env, self) => self.renderToken(tokens, idx, options));\n\n    this.md.renderer.rules.fence = (tokens, idx, options, env, self) => {\n      const token = tokens[idx];\n      const info = token.info.trim();\n      if (info === 'mermaid') {\n        return '<div class=\"mermaid\">' + token.content + '</div>';\n      }\n      if (info === 'svg') {\n        return token.content;\n      }\n      return defaultFence(tokens, idx, options, env, self);\n    };\n  }\n\n  createStructure() {\n    this.container.classList.add(this.options.baseClass);\n\n    this.container.innerHTML = `\n        <div class=\"${this.options.baseClass}-title\" ${!this.options.titleShow ? 'style=\"display:none\"' : ''}>\n          ${this.options.titleContent}\n        </div>\n        <div class=\"${this.options.baseClass}-controls\" ${!this.options.showControls ? 'style=\"display:none\"' : ''}>\n          <button data-view='src'>Source</button>\n          <button data-view=\"html\">Rendered</button>\n          <button data-view=\"split\">Split</button>\n          <button class=\"copy-src-button\">Copy Source</button>\n          <button class=\"copy-html-button\">Copy Rendered</button>\n        </div>\n        <div class=\"${this.options.baseClass}-editor\">\n          <textarea class=\"${this.options.baseClass}-input\"></textarea>\n          <div class=\"${this.options.baseClass}-output\"></div>\n        </div>\n      `;\n\n    this.title = this.container.querySelector(`.${this.options.baseClass}-title`);\n    this.controls = this.container.querySelector(`.${this.options.baseClass}-controls`);\n    this.editor = this.container.querySelector(`.${this.options.baseClass}-editor`);\n    this.input = this.container.querySelector(`.${this.options.baseClass}-input`);\n    this.output = this.container.querySelector(`.${this.options.baseClass}-output`);\n\n    \n  }\n\n  initializeEventHandlers() {\n    this.controls.querySelectorAll('button[data-view]').forEach(button => {\n      button.addEventListener('click', () => this.setView(button.dataset.view));\n    });\n\n    this.controls.querySelector('.copy-src-button').addEventListener('click', () => this.copySource());\n    this.controls.querySelector('.copy-html-button').addEventListener('click', () => this.copyHTML());\n\n    //onchange() for input source\n    this.input.addEventListener('input', () => { this.setContent(); });\n  }\n  initializeResizeObserver() {\n    const resizeObserver = new ResizeObserver(entries => {\n      for (let entry of entries) {\n        if (entry.target === this.container) {\n          this.adjustLayout();\n        }\n      }\n    });\n    resizeObserver.observe(this.container);\n  }\n\n  adjustLayout() {\n    const containerRect = this.container.getBoundingClientRect();\n    const titleHeight = this.title.offsetHeight;\n    const controlsHeight = this.controls.offsetHeight;\n\n    const availableHeight = containerRect.height - titleHeight - controlsHeight;\n    const availableWidth = containerRect.width;\n    this.editor.style.height = `${availableHeight}px`;\n    this.editor.style.width = `${availableWidth}px`;\n\n    if (this.currentView === 'split') {\n      this.input.style.width = '50%';\n      this.output.style.width = '50%';\n    } else if (this.currentView === 'src') {\n      this.input.style.width = '100%';\n    } else if (this.currentView === 'html') {\n      this.output.style.width = '100%';\n    }\n  }\n\n  setContent(content = this.input.value, contentType = this.inputContentType, saveRevision = true) {\n    this.input.value = content;\n    this.inputContentType = contentType;\n    // push the content to the revisions\n    if (saveRevision) {\n      this.revisions.buffer.push({ content, contentType });\n      this.revisions.index = this.revisions.buffer.length - 1;  \n      // remove all the revisions after the current index\n      this.revisions.buffer = this.revisions.buffer.slice(0, this.revisions.index + 1);\n    }\n    // render it\n    this.renderOutput();\n  }\n\n  // if possible undo the last change else do nothing\n  revisionUndo() {\n    // if possible undo the last change else do nothing, use the revisions buffer and index\n    if (this.revisions.buffer.length > 0 && this.revisions.index > 0) {\n      this.revisions.index--;\n      const lastChange = this.revisions.buffer[this.revisions.index];\n      this.input.value = lastChange.content;\n      this.inputContentType = lastChange.contentType;\n      //console.log(this.revisions.index);\n      this.renderOutput();\n\n    }\n  }\n  // if possible redo the last change else do nothing\n  revisionRedo() {\n    if (this.revisions.index < this.revisions.buffer.length - 1) {\n      this.revisions.index++;\n      const lastChange = this.revisions.buffer[this.revisions.index];\n      this.input.value = lastChange.content;\n      this.inputContentType = lastChange.contentType;\n      //console.log(this.revisions.index);\n      this.renderOutput();\n    }\n  }\n  revisionSet(index) {\n    if (index >= 0 && index < this.revisions.buffer.length) {\n      this.revisions.index = index;\n      const lastChange = this.revisions.buffer[this.revisions.index];\n      this.input.value = lastChange.content;\n      this.inputContentType = lastChange.contentType;\n      //console.log(this.revisions.index);\n      this.renderOutput();\n    }\n  }\n  revisionNumRevsions() {\n    return this.revisions.buffer.length;\n  }\n  revisionGetCurrentIndex() {\n    return this.revisions.index;\n  }\n\n  getContent() {\n    return this.input.value;\n  }\n\n  cleanMarkdown(md) {\n    return md.replace(/^```markdown\\s+/, '').replace(/```$/, '');\n  }\n\n  async renderMarkdown(md) {\n\n    const markdown = md || this.input.value;\n    const html = this.md.render(markdown);\n    this.output.innerHTML = \"<div contenteditable='true'>\" + html + \"</div>\";\n\n    // Convert all images to data URLs immediately after rendering\n    const contentDiv = this.output.querySelector('div[contenteditable=\"true\"]');\n    const images = contentDiv.querySelectorAll('img');\n\n    // render images to data urls\n\n    for (const img of images) {\n      try {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n\n        // Create new image and wait for it to load\n        const tempImg = new Image();\n        tempImg.crossOrigin = 'anonymous';\n\n        await new Promise((resolve, reject) => {\n          tempImg.onload = () => {\n            // Set canvas size to match image\n            canvas.width = tempImg.naturalWidth;\n            canvas.height = tempImg.naturalHeight;\n\n            // Draw image to canvas\n            ctx.drawImage(tempImg, 0, 0);\n\n            // Convert to data URL\n            const dataUrl = canvas.toDataURL('image/png', 1.0);\n\n            // Update original image\n            img.src = dataUrl;\n            resolve();\n          };\n          tempImg.onerror = reject;\n          tempImg.src = img.src;\n        });\n      } catch (error) {\n        console.error('Failed to convert image:', error);\n      }\n\n    }\n\n    // end of images to data urls\n\n    // Initialize mermaid diagrams after all images are processed\n    mermaid.init(undefined, this.output.querySelectorAll('.mermaid'));\n  } // end of renderMarkdown\n\n  // todo rename sourceRemoveAllHR ()  ==> handled markdown or html via replace (---) or (<hr>, <hr/>) respectively\n  markdownRemoveAllHR() {\n    if (this.inputContentType === 'md') {\n      const markdown = this.getMarkdownSource();\n      const newMarkdown = markdown.replace(/---/g, '');\n      this.setContent(newMarkdown, this.inputContentType);\n    }\n  }\n  /**\n   * Adjusts the heading levels in Markdown text by a specified offset.\n   * \n   * @param {string} markdown - The Markdown text to process\n   * @param {number} offset - The amount to adjust heading levels by (positive to increase, negative to decrease)\n   * @returns {string} - The Markdown text with adjusted heading levels\n   */\n  markdownAdjustHeadings(markdown, offset) {\n    // Early exit if offset is 0 or invalid input\n    if (offset === 0 || typeof markdown !== 'string') {\n      return markdown;\n    }\n\n    // Split the input into lines\n    const lines = markdown.split('\\n');\n\n    // Process each line\n    const modifiedLines = lines.map(line => {\n      // Regex to match heading lines: starts with 1-6 hash symbols followed by a space\n      const headingMatch = line.match(/^(#{1,6})\\s/);\n\n      if (!headingMatch) {\n        // Not a heading, return unchanged\n        return line;\n      }\n\n      const currentHeadingLevel = headingMatch[1].length;\n      // Calculate new heading level with bounds checking (min 1, max 6)\n      const newHeadingLevel = Math.min(Math.max(currentHeadingLevel + offset, 1), 6);\n\n      // Replace the heading prefix with the new level\n      return '#'.repeat(newHeadingLevel) + line.substring(currentHeadingLevel);\n    });\n\n    // Join the lines back together\n    return modifiedLines.join('\\n');\n  }\n  markdownEditorAdjustHeadings(offset) {\n    const markdown = this.getMarkdownSource();\n    const newMarkdown = this.markdownAdjustHeadings(markdown, offset);\n    this.setContent(newMarkdown, this.inputContentType);\n  }\n\n  setView(view) {\n    this.currentView = view;\n\n    this.controls.querySelectorAll('button[data-view]').forEach(btn => {\n      btn.classList.toggle('active', btn.dataset.view === view);\n    });\n\n    const copyMDButton = this.controls.querySelector('.copy-src-button');\n    const copyHTMLButton = this.controls.querySelector('.copy-html-button');\n\n    if (view === 'src') {\n      this.input.classList.remove('squibview-hidden');\n      this.output.classList.add('squibview-hidden');\n      this.input.style.width = '100%';\n      copyMDButton.classList.remove('squibview-hidden');\n      copyHTMLButton.classList.add('squibview-hidden');\n    } else if (view === 'html') {\n      this.input.classList.add('squibview-hidden');\n      this.output.classList.remove('squibview-hidden');\n      this.output.style.width = '100%';\n      copyMDButton.classList.add('squibview-hidden');\n      copyHTMLButton.classList.remove('squibview-hidden');\n    } else { // view == 'split'\n      this.input.classList.remove('squibview-hidden');\n      this.output.classList.remove('squibview-hidden');\n      this.input.style.width = '50%';\n      this.output.style.width = '50%';\n      copyMDButton.classList.remove('squibview-hidden');\n      copyHTMLButton.classList.remove('squibview-hidden');\n    }\n\n    this.adjustLayout();\n  }\n\n  async copyContent() {\n    const copyButton = this.controls.querySelector('.copy-button');\n    copyButton.textContent = 'Copying...';\n\n    try {\n      const contentDiv = this.output.querySelector('div[contenteditable=\"true\"]');\n      if (!contentDiv) {\n        throw new Error('Content div not found');\n      }\n\n      const clone = contentDiv.cloneNode(true);\n\n      clone.querySelectorAll('pre code').forEach(block => {\n        const formattedCode = block.innerHTML;\n\n        const table = document.createElement('table');\n        table.style.width = '100%';\n        table.style.borderCollapse = 'collapse';\n        table.style.border = 'none';\n\n        const tr = document.createElement('tr');\n        const td = document.createElement('td');\n        td.style.backgroundColor = '#f7f7f7';\n        td.style.padding = '12px';\n        td.style.fontFamily = 'Consolas, Monaco, \"Courier New\", monospace';\n        td.style.whiteSpace = 'pre';\n        td.style.border = 'none';\n\n        td.innerHTML = formattedCode.trim();\n\n        tr.appendChild(td);\n        table.appendChild(tr);\n        block.parentNode.replaceWith(table);\n      });\n\n      const svgElements = clone.querySelectorAll('svg');\n      for (const svg of svgElements) {\n        try {\n          const pngBlob = await this.svgToPng(svg);\n          const dataUrl = await new Promise(resolve => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.readAsDataURL(pngBlob);\n          });\n\n          const img = document.createElement('img');\n          img.src = dataUrl;\n          img.width = svg.clientWidth || svg.viewBox.baseVal.width || 100;\n          img.height = svg.clientHeight || svg.viewBox.baseVal.height || 100;\n          img.setAttribute('v:shapes', 'image' + Math.random().toString(36).substr(2, 9));\n          img.style.width = img.width + 'px';\n          img.style.height = img.height + 'px';\n          img.alt = \"Converted diagram\";\n          svg.parentNode.replaceChild(img, svg);\n        } catch (error) {\n          console.error('Failed to convert SVG:', error);\n        }\n      }\n\n\n      // Convert all images to data URLs\n      const imgElements = clone.querySelectorAll('img');\n      await Promise.all(imgElements.map(async img => {\n        console.log('Converting image:', img.src);\n\n        // Create canvas\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n\n        // Create new image and wait for it to load completely\n        const tempImg = new Image();\n        tempImg.crossOrigin = 'anonymous';\n\n        try {\n          await new Promise((resolve, reject) => {\n            tempImg.onload = resolve;\n            tempImg.onerror = reject;\n            tempImg.src = img.src;\n          });\n\n          // Set dimensions\n          canvas.width = tempImg.offsetWidth || img.offsetWidth || 200;\n          canvas.height = tempImg.offsetHeight || img.offsetHeight || 200;\n\n          // Draw and convert\n          ctx.drawImage(tempImg, 0, 0);\n          const dataUrl = canvas.toDataURL('image/png', 1.0);\n\n          // Create and wait for new image with data URL\n          const newImg = new Image();\n          await new Promise((resolve, reject) => {\n            newImg.onload = () => {\n              newImg.alt = img.alt || 'Converted image';\n              newImg.width = canvas.width;\n              newImg.height = canvas.height;\n              newImg.style.cssText = img.style.cssText;\n              // Force image to be treated as embedded\n              newImg.setAttribute('data-embedded', 'true');\n              // Replace the old image\n              img.parentNode.replaceChild(newImg, img);\n              console.log('Successfully converted image to data URL');\n              resolve();\n            };\n            newImg.onerror = reject;\n            newImg.src = dataUrl;\n          });\n        } catch (error) {\n          console.error('Error converting image:', error, img.src);\n          // Don't rethrow - we want to continue with other images\n        }\n      }));\n\n\n      const clipData = new ClipboardItem({\n        'text/html': new Blob([`\n            <html xmlns:v=\"urn:schemas-microsoft-com:vml\"\n                  xmlns:o=\"urn:schemas-microsoft-com:office:office\"\n                  xmlns:w=\"urn:schemas-microsoft-com:office:word\">\n              <head>\n                <meta charset=\"utf-8\">\n                <style>\n                  table { border-collapse: collapse; width: 100%; margin-bottom: 1em; }\n                  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }\n                  th { background-color: #f0f0f0; font-weight: bold; }\n\n                  /* Code block styling */\n                  .hljs { display: block; overflow-x: auto; padding: 1em; }\n                  .hljs-keyword { color: #0033B3; }\n                  .hljs-string { color: #067D17; }\n                  .hljs-comment { color: #8C8C8C; }\n                  .hljs-function { color: #00627A; }\n                  .hljs-number { color: #1750EB; }\n                  .hljs-operator { color: #687687; }\n                  .hljs-punctuation { color: #000000; }\n\n                  /* Word-specific image handling */\n                  img { display: block; max-width: none; }\n                </style>\n              </head>\n              <body>\n                ${clone.innerHTML}\n              </body>\n            </html>\n          `], { type: 'text/html' }),\n        'text/plain': new Blob([clone.innerText], { type: 'text/plain' })\n      });\n\n      await navigator.clipboard.write([clipData]);\n      copyButton.textContent = 'Copied!';\n    } catch (err) {\n      console.error('Copy failed:', err);\n      copyButton.textContent = 'Copy failed';\n    }\n\n    setTimeout(() => {\n      copyButton.textContent = 'Copy';\n    }, 2000);\n  }\n\n  svgToPng(svgElement) {\n    return new Promise((resolve, reject) => {\n      const svgString = new XMLSerializer().serializeToString(svgElement);\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n\n      const scale = 2;\n      const svgWidth = svgElement.clientWidth || svgElement.viewBox.baseVal.width || 100;\n      const svgHeight = svgElement.clientHeight || svgElement.viewBox.baseVal.height || 100;\n\n      canvas.width = svgWidth * scale;\n      canvas.height = svgHeight * scale;\n      ctx.scale(scale, scale);\n\n      img.onload = () => {\n        try {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.drawImage(img, 0, 0, svgWidth, svgHeight);\n          canvas.toBlob(blob => {\n            resolve(blob);\n          }, 'image/png', 1.0);\n        } catch (err) {\n          reject(err);\n        }\n      };\n\n      img.onerror = reject;\n      const svgDataUrl = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgString)}`;\n      img.src = svgDataUrl;\n    });\n  }\n\n  controlsShow(show) {\n    this.controls.style.display = show ? '' : 'none';\n    this.options.showControls = show;\n    this.adjustLayout();\n  }\n\n  titleShow(show) {\n    this.title.style.display = show ? '' : 'none';\n    this.options.titleShow = show;\n    this.adjustLayout();\n  }\n\n  titleSetContent(content) {\n    this.title.innerHTML = content;\n    this.options.titleContent = content;\n  }\n\n  titleGetContent() {\n    return this.title.innerHTML;\n  }\n\n  getMarkdownSource() {\n    return this.input.value;\n  }\n\n  getHTMLSource() {\n    return this.output.querySelector('div[contenteditable=\"true\"]').innerHTML;\n  }\n\n  // Standalone function to toggle between Markdown preview and split view\n  toggleView() {\n    const editor = window.editor;\n    if (editor.currentView === 'src') {\n      editor.setView('split');\n    } else if (editor.currentView === 'split') {\n      editor.setView('html');\n    } else\n      editor.setView('src')\n\n    console.log(editor.currentView)\n  }\n\n  /**\n   * Creates an iframe that fills the entire parent element and injects provided HTML content.\n   * @param {HTMLElement} parentElement - The parent element to contain the iframe.\n   * @param {string} htmlContent - The HTML content to inject into the iframe.\n   */\n  insertContentInIframe(parentElement, htmlContent) {\n    // Create an iframe element\n    const iframe = document.createElement('iframe');\n\n    // Style the iframe to fill the parent completely\n    iframe.style.width = '100%';\n    iframe.style.height = '100%';\n    iframe.style.border = 'none';\n    iframe.style.display = 'block';\n\n    //iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin');\n    // Append the iframe to the parent element\n    parentElement.innerHTML = '';\n    parentElement.appendChild(iframe);\n\n    // Access the iframe's document and write the HTML content into it\n    const iframeDoc = iframe.contentWindow.document;\n    iframeDoc.open();\n    iframeDoc.write(htmlContent);\n    iframeDoc.close();\n    this.output_iframe = iframe\n    this.output_ifraome_content = htmlContent;\n  }\n  // this function takes input as html and renders it in an iframe in the output div\n  // it write to the outputDiv that is a member of this object\n  renderHTML(src) {\n    const htmlContent = src;\n    const outputDiv = this.output;\n    this.insertContentInIframe(outputDiv, htmlContent);\n  }\n\n  renderOutput() {\n    switch (this.inputContentType) {\n      case 'html':\n        this.renderHTML(this.input.value)\n        break;\n      case 'reveal':\n        this.renderHTML(this.makeRevealJSFullPage(this.input.value))\n        break;\n      case 'csv': // comma separated\n      case 'tsv': // tab separated\n      case 'semisv': // semicolon separated\n      case 'ssv': //space separated\n        // take the input and treat it as csv / tsv and convert it to markdown to render on the fly\n        const data = this.getContent();\n        // delimiter can be commma, tab, space, or semi-colon\n        let delimiter = \",\";\n        const delims = { \"tsv\": \",\", \"semisv\": \";\", \"ssv\": \" \" };\n        if (this.inputContentType in delims)\n          delimiter = delims[this.inputContentType];\n        const markdownTable = this.csvOrTsvToMarkdownTable(data, delimiter);\n        this.renderMarkdown(markdownTable);\n        break;\n      case 'md':\n        this.renderMarkdown();\n        break;\n      default:\n        this.renderMarkdown();\n        console.log(\"Unsupported content type: \", this.inputContentType);\n    }\n  }\n\n  async copySource() {\n    const copyButton = this.controls.querySelector('.copy-src-button');\n    copyButton.textContent = 'Copying...';\n\n    try {\n      const markdownText = this.getMarkdownSource();\n\n      try {\n        await navigator.clipboard.writeText(markdownText);\n      } catch (modernErr) {\n        const textarea = document.createElement('textarea');\n        textarea.value = markdownText;\n        textarea.style.position = 'fixed';\n        textarea.style.opacity = '0';\n        document.body.appendChild(textarea);\n        textarea.select();\n\n        //const successful = document.execCommand('copy');\n        document.body.removeChild(textarea);\n\n        //if (!successful) throw new Error('Fallback copy failed');\n      }\n\n      copyButton.textContent = 'Copied!';\n    } catch (err) {\n      console.error('Copy Markdown failed:', err);\n      copyButton.textContent = 'Copy failed';\n    }\n\n    setTimeout(() => {\n      copyButton.textContent = 'Copy Source';\n    }, 2000);\n  }\n\n  async copyHTML() {\n    const copyButton = this.controls.querySelector('.copy-html-button');\n    copyButton.textContent = 'Copying...';\n\n    try {\n      const contentDiv = this.output.querySelector('div[contenteditable=\"true\"]');\n      if (!contentDiv) {\n        throw new Error('Content div not found');\n      }\n\n      const clone = contentDiv.cloneNode(true);\n\n      // Process code blocks\n      clone.querySelectorAll('pre code').forEach(block => {\n        const formattedCode = block.innerHTML;\n\n        const table = document.createElement('table');\n        table.style.width = '100%';\n        table.style.borderCollapse = 'collapse';\n        table.style.border = 'none';\n\n        const tr = document.createElement('tr');\n        const td = document.createElement('td');\n        td.style.backgroundColor = '#f7f7f7';\n        td.style.padding = '12px';\n        td.style.fontFamily = 'Consolas, Monaco, \"Courier New\", monospace';\n        td.style.whiteSpace = 'pre';\n        td.style.border = 'none';\n\n        td.innerHTML = formattedCode.trim();\n\n        tr.appendChild(td);\n        table.appendChild(tr);\n        block.parentNode.replaceWith(table);\n      });\n\n      // Convert SVG elements to PNG\n      const svgElements = clone.querySelectorAll('svg');\n      for (const svg of svgElements) {\n        try {\n          const pngBlob = await this.svgToPng(svg);\n          const dataUrl = await new Promise(resolve => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.readAsDataURL(pngBlob);\n          });\n\n          const img = document.createElement('img');\n          img.src = dataUrl;\n          img.width = svg.clientWidth || svg.viewBox.baseVal.width || 100;\n          img.height = svg.clientHeight || svg.viewBox.baseVal.height || 100;\n          img.setAttribute('v:shapes', 'image' + Math.random().toString(36).substr(2, 9));\n          img.style.width = img.width + 'px';\n          img.style.height = img.height + 'px';\n          img.alt = \"Converted diagram\";\n          svg.parentNode.replaceChild(img, svg);\n        } catch (error) {\n          console.error('Failed to convert SVG:', error);\n        }\n      }\n\n      const htmlContent = `\n          <html xmlns:v=\"urn:schemas-microsoft-com:vml\"\n                xmlns:o=\"urn:schemas-microsoft-com:office:office\"\n                xmlns:w=\"urn:schemas-microsoft-com:office:word\">\n            <head>\n              <meta charset=\"utf-8\">\n              <style>\n                table { border-collapse: collapse; width: 100%; margin-bottom: 1em; }\n                th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }\n                th { background-color: #f0f0f0; font-weight: bold; }\n\n                /* Code block styling */\n                .hljs { display: block; overflow-x: auto; padding: 1em; }\n                .hljs-keyword { color: #0033B3; }\n                .hljs-string { color: #067D17; }\n                .hljs-comment { color: #8C8C8C; }\n                .hljs-function { color: #00627A; }\n                .hljs-number { color: #1750EB; }\n                .hljs-operator { color: #687687; }\n                .hljs-punctuation { color: #000000; }\n\n                /* Word-specific image handling */\n                img { display: block; max-width: none; }\n              </style>\n            </head>\n            <body>\n              ${clone.innerHTML}\n            </body>\n          </html>`;\n\n      const platform = this.getPlatform();\n\n      if (platform === 'macos') {\n        // macOS approach (previously working version)\n        try {\n          await navigator.clipboard.write([\n            new ClipboardItem({\n              'text/html': new Blob([htmlContent], { type: 'text/html' }),\n              'text/plain': new Blob([clone.innerText], { type: 'text/plain' })\n            })\n          ]);\n        } catch (modernErr) {\n          // Safari fallback\n          if (!this.copyToClipboard(htmlContent)) {\n            throw new Error('Fallback copy failed');\n          }\n        }\n      } else {\n        // Windows/Linux approach\n        const tempDiv = document.createElement('div');\n        tempDiv.style.position = 'fixed';\n        tempDiv.style.left = '-9999px';\n        tempDiv.style.top = '0';\n        tempDiv.innerHTML = htmlContent;\n        document.body.appendChild(tempDiv);\n\n        try {\n          await navigator.clipboard.write([\n            new ClipboardItem({\n              'text/html': new Blob([htmlContent], { type: 'text/html' }),\n              'text/plain': new Blob([clone.innerText], { type: 'text/plain' })\n            })\n          ]);\n        } catch (modernErr) {\n          const selection = window.getSelection();\n          const range = document.createRange();\n          range.selectNodeContents(tempDiv);\n          selection.removeAllRanges();\n          selection.addRange(range);\n\n          const successful = document.execCommand('copy');\n          if (!successful) {\n            throw new Error('Fallback copy failed');\n          }\n        } finally {\n          if (tempDiv && tempDiv.parentNode) {\n            document.body.removeChild(tempDiv);\n          }\n        }\n      }\n\n      copyButton.textContent = 'Copied!';\n    } catch (err) {\n      console.error('Copy HTML failed:', err);\n      copyButton.textContent = 'Copy failed';\n    }\n\n    setTimeout(() => {\n      copyButton.textContent = 'Copy Formatted';\n    }, 2000);\n  }\n\n  copyToClipboard(string) {\n    let textarea;\n    let result;\n\n    try {\n      textarea = document.createElement('textarea');\n      textarea.setAttribute('readonly', true);\n      textarea.setAttribute('contenteditable', true);\n      textarea.style.position = 'fixed';\n      textarea.style.left = '0';\n      textarea.style.top = '0';\n      textarea.style.opacity = '0';\n      textarea.value = string;\n\n      document.body.appendChild(textarea);\n\n      textarea.focus();\n      textarea.select();\n\n      const range = document.createRange();\n      range.selectNodeContents(textarea);\n\n      const sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n\n      textarea.setSelectionRange(0, textarea.value.length);\n      result = document.execCommand('copy');\n    } catch (err) {\n      console.error(err);\n      result = null;\n    } finally {\n      if (textarea && textarea.parentNode) {\n        document.body.removeChild(textarea);\n      }\n    }\n\n    // manual copy fallback using prompt\n    if (!result) {\n      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n      const copyHotkey = isMac ? '⌘C' : 'CTRL+C';\n      result = prompt(`Press ${copyHotkey}`, string);\n      if (!result) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  getPlatform() {\n    const platform = navigator.platform.toLowerCase();\n    const userAgent = navigator.userAgent.toLowerCase();\n\n    if (platform.includes('mac') || userAgent.includes('mac')) {\n      return 'macos';\n    } else if (userAgent.includes('windows')) {\n      return 'windows';\n    } else if (userAgent.includes('linux')) {\n      return 'linux';\n    }\n    return 'unknown';\n  }\n\n  // Make a complete HTML page from a div (or any html snippet) with optional editability\n  makeHTMLPageFromDiv(inputDivHTML, editable = false) {\n    let editableAttr = editable ? 'contenteditable=\"true\"' : '';\n    let s =\n      `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Markdown Viewer with Graphics Support</title>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css\">\n  <xscripx src=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js\"></xscripx>\n  <xscripx src=\"https://unpkg.com/mermaid/dist/mermaid.min.js\"></xscripx>\n  <style>\n      body {\n          font-family: Arial, sans-serif;\n          box-sizing: border-box;\n          padding: 20px;\n      }\n      .squibview-output {\n          width: 50%;\n          margin: auto;\n      }\n      pre {\n          background-color: #f4f4f4;\n          padding: 10px;\n          border-radius: 5px;\n          overflow-x: auto;\n      }\n      table {\n          width: 100%;\n          border-collapse: collapse;\n          margin: 20px 0;\n      }\n      table, th, td {\n          border: 1px solid black;\n      }\n      th, td {\n          padding: 8px;\n          text-align: left;\n      }\n  </style>\n</head>\n<body ${editableAttr}>\n  ${inputDivHTML}\n</body>\n</html>`;\n    // now we need to remove the temp-script tag with the script in it.\n    // we do this with a regex search/replace\n    s = s.replaceAll(\"xscripx\", \"script\");\n    console.log(editableAttr);\n    return s;\n  }\n\n  makeRevealJSFullPage(markdown, title = \"Slide Presentation\") {\n    return `<!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n      <meta charset=\"utf-8\">\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      <title>${title}</title>\n      <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css\">\n      <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/black.css\">\n      <script src=\"https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js\"></script>\n  </head>\n  <body>\n      <div class=\"reveal\" contenteditable=\"true\">\n          <div class=\"slides\">\n              ${markdown.split('---').map(slide => `<section data-markdown><script type=\"text/template\">${slide.trim()}</script></section>`).join('\\n')}\n          </div>\n      </div>\n      <script src=\"https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js\"></script>\n      <script src=\"https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js\"></script>\n      <script>\n          Reveal.initialize({\n              plugins: [ RevealMarkdown ]\n          });\n          \n          // Ensure Mermaid diagrams initialize correctly\n          document.addEventListener('DOMContentLoaded', () => {\n              mermaid.initialize({ startOnLoad: true , securityLevel: 'loose', theme: 'dark' });\n              document.querySelectorAll('.mermaid').forEach(el => {\n                  el.innerHTML = el.textContent;\n                  mermaid.init(undefined, el);\n              });\n          });\n      </script>\n  </body>\n  </html>`;\n  }\n\n  csvOrTsvToMarkdownTable(input, delimiter = ',') {\n    // Parse CSV/TSV content\n    const parsedData = Papa.parse(input, {\n      delimiter,\n      skipEmptyLines: true\n    });\n\n    const rows = parsedData.data;\n\n    if (rows.length === 0) return 'No data found.';\n\n    // Markdown table header\n    const header = `| ${rows[0].join(' | ')} |`;\n    const separator = `| ${rows[0].map(() => '---').join(' | ')} |`;\n    const tableRows = rows.slice(1).map(row => `| ${row.join(' | ')} |`).join('\\n');\n\n    return `${header}\\n${separator}\\n${tableRows}`;\n  }\n\n\n}// end of class SquibView\n\nexport default SquibView;\n"],"names":["SquibView","element","options","arguments","length","undefined","_classCallCheck","_objectSpread","defaultOptions","container","document","querySelector","Error","revisions","buffer","index","initializeLibraries","createStructure","initializeEventHandlers","initializeResizeObserver","initialContent","setContent","inputContentType","setView","initialView","_createClass","key","value","mermaid","initialize","startOnLoad","securityLevel","theme","errorCallback","error","console","warn","init","md","window","markdownit","html","linkify","typographer","highlight","str","lang","hljs","getLanguage","language","__","defaultFence","renderer","rules","fence","tokens","idx","env","self","renderToken","token","info","trim","content","classList","add","baseClass","innerHTML","concat","titleShow","titleContent","showControls","title","controls","editor","input","output","_this","querySelectorAll","forEach","button","addEventListener","dataset","view","copySource","copyHTML","_this2","resizeObserver","ResizeObserver","entries","_iterator","_createForOfIteratorHelper","_step","s","n","done","entry","target","adjustLayout","err","e","f","observe","containerRect","getBoundingClientRect","titleHeight","offsetHeight","controlsHeight","availableHeight","height","availableWidth","width","style","currentView","contentType","saveRevision","push","slice","renderOutput","revisionUndo","lastChange","revisionRedo","revisionSet","revisionNumRevsions","revisionGetCurrentIndex","getContent","cleanMarkdown","replace","_renderMarkdown","_asyncToGenerator","_regeneratorRuntime","mark","_callee","markdown","contentDiv","images","_iterator2","_step2","_loop","wrap","_callee$","_context2","prev","next","render","img","canvas","ctx","tempImg","_loop$","_context","createElement","getContext","Image","crossOrigin","Promise","resolve","reject","onload","naturalWidth","naturalHeight","drawImage","dataUrl","toDataURL","src","onerror","t0","stop","delegateYield","t1","finish","renderMarkdown","_x","apply","markdownRemoveAllHR","getMarkdownSource","newMarkdown","markdownAdjustHeadings","offset","lines","split","modifiedLines","map","line","headingMatch","match","currentHeadingLevel","newHeadingLevel","Math","min","max","repeat","substring","join","markdownEditorAdjustHeadings","btn","toggle","copyMDButton","copyHTMLButton","remove","_copyContent","_callee3","_this3","copyButton","clone","svgElements","_iterator3","_step3","_loop2","imgElements","clipData","_callee3$","_context5","textContent","cloneNode","block","formattedCode","table","borderCollapse","border","tr","td","backgroundColor","padding","fontFamily","whiteSpace","appendChild","parentNode","replaceWith","svg","pngBlob","_loop2$","_context4","svgToPng","sent","reader","FileReader","onloadend","result","readAsDataURL","clientWidth","viewBox","baseVal","clientHeight","setAttribute","random","toString","substr","alt","replaceChild","all","_ref","_callee2","newImg","_callee2$","_context3","log","offsetWidth","cssText","_x2","ClipboardItem","Blob","type","innerText","navigator","clipboard","write","t2","setTimeout","copyContent","svgElement","svgString","XMLSerializer","serializeToString","scale","svgWidth","svgHeight","clearRect","toBlob","blob","svgDataUrl","encodeURIComponent","controlsShow","show","display","titleSetContent","titleGetContent","getHTMLSource","toggleView","insertContentInIframe","parentElement","htmlContent","iframe","iframeDoc","contentWindow","open","close","output_iframe","output_ifraome_content","renderHTML","outputDiv","makeRevealJSFullPage","data","delimiter","delims","markdownTable","csvOrTsvToMarkdownTable","_copySource","_callee4","markdownText","textarea","_callee4$","_context6","writeText","position","opacity","body","select","removeChild","_copyHTML","_callee5","_this4","_iterator4","_step4","_loop3","platform","tempDiv","selection","range","successful","_callee5$","_context8","_loop3$","_context7","getPlatform","copyToClipboard","left","top","t3","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","execCommand","t4","string","focus","sel","setSelectionRange","isMac","toUpperCase","indexOf","copyHotkey","prompt","toLowerCase","userAgent","includes","makeHTMLPageFromDiv","inputDivHTML","editable","editableAttr","replaceAll","slide","parsedData","Papa","parse","skipEmptyLines","rows","header","separator","tableRows","row","_defineProperty","version","url"],"mappings":"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"}