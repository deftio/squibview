{"version":3,"file":"squibview-react.js","sources":["../src/SquibViewReact.js"],"sourcesContent":["import React from 'react';\nimport SquibView from './squibview.js';\n\n/**\n * React component wrapper for SquibView\n */\nclass SquibViewReact extends React.Component {\n  constructor(props) {\n    super(props);\n    this.containerRef = React.createRef();\n    this.state = {\n      editor: null,\n      content: props.initialContent || ''\n    };\n  }\n  \n  componentDidMount() {\n    if (this.containerRef.current) {\n      // Initialize SquibView\n      const instance = new SquibView(this.containerRef.current, {\n        initialContent: this.props.initialContent,\n        inputContentType: this.props.inputContentType,\n        showControls: this.props.showControls,\n        initialView: this.props.initialView,\n        titleShow: this.props.titleShow,\n        titleContent: this.props.titleContent\n      });\n      \n      // Override methods to communicate with React\n      const originalSetContent = instance.setContent.bind(instance);\n      instance.setContent = (newContent, type, saveRevision) => {\n        originalSetContent(newContent, type, saveRevision);\n        this.setState({ content: newContent });\n        if (this.props.onChange) {\n          this.props.onChange(newContent, type);\n        }\n      };\n      \n      const originalSetView = instance.setView.bind(instance);\n      instance.setView = (view) => {\n        originalSetView(view);\n        if (this.props.onViewChange) {\n          this.props.onViewChange(view);\n        }\n      };\n      \n      // Listen for editor events and re-emit them as props callbacks\n      instance.events.on('content:rendered', (contentType) => {\n        if (this.props.onContentRendered) {\n          this.props.onContentRendered(contentType);\n        }\n      });\n      \n      instance.events.on('revision:undo', (content, contentType) => {\n        if (this.props.onUndoRedo) {\n          this.props.onUndoRedo('undo', content, contentType);\n        }\n      });\n      \n      instance.events.on('revision:redo', (content, contentType) => {\n        if (this.props.onUndoRedo) {\n          this.props.onUndoRedo('redo', content, contentType);\n        }\n      });\n      \n      this.setState({ editor: instance });\n    }\n  }\n  \n  componentDidUpdate(prevProps) {\n    // Handle content updates from parent\n    if (this.state.editor && this.props.initialContent !== prevProps.initialContent) {\n      this.state.editor.setContent(\n        this.props.initialContent, \n        this.props.inputContentType || this.state.editor.inputContentType, \n        false\n      );\n      this.setState({ content: this.props.initialContent });\n    }\n    \n    // Handle content type changes\n    if (this.state.editor && this.props.inputContentType !== prevProps.inputContentType) {\n      this.state.editor.setContent(\n        this.state.editor.getContent(), \n        this.props.inputContentType,\n        false\n      );\n    }\n    \n    // Handle view changes\n    if (this.state.editor && this.props.initialView !== prevProps.initialView) {\n      this.state.editor.setView(this.props.initialView);\n    }\n    \n    // Handle controls visibility\n    if (this.state.editor && this.props.showControls !== prevProps.showControls) {\n      this.state.editor.controlsShow(this.props.showControls);\n    }\n    \n    // Handle title visibility\n    if (this.state.editor && this.props.titleShow !== prevProps.titleShow) {\n      this.state.editor.titleShow(this.props.titleShow);\n    }\n    \n    // Handle title content\n    if (this.state.editor && this.props.titleContent !== prevProps.titleContent) {\n      this.state.editor.titleSetContent(this.props.titleContent);\n    }\n  }\n  \n  componentWillUnmount() {\n    // Clean up event listeners\n    if (this.state.editor && this.state.editor.events) {\n      this.state.editor.events.off('*');\n    }\n  }\n  \n  render() {\n    const { className, ...otherProps } = this.props;\n    return React.createElement('div', { \n      ref: this.containerRef,\n      className: `squibview-react-container ${className || ''}`,\n      ...otherProps\n    });\n  }\n}\n\n// Add prop types documentation for IDE support\nSquibViewReact.propTypes = {\n  // React's PropTypes are not included directly to avoid dependencies\n  // This is just for documentation purposes\n  /*\n  initialContent: PropTypes.string,\n  inputContentType: PropTypes.string,\n  showControls: PropTypes.bool,\n  initialView: PropTypes.string,\n  titleShow: PropTypes.bool,\n  titleContent: PropTypes.string,\n  className: PropTypes.string,\n  onChange: PropTypes.func,\n  onViewChange: PropTypes.func,\n  onContentRendered: PropTypes.func,\n  onUndoRedo: PropTypes.func\n  */\n};\n\n// Default props\nSquibViewReact.defaultProps = {\n  initialContent: '',\n  inputContentType: 'md',\n  showControls: true,\n  initialView: 'split',\n  titleShow: false,\n  titleContent: '',\n  className: ''\n};\n\nexport default SquibViewReact;"],"names":["SquibViewReact","_React$Component","props","_this","_classCallCheck","_callSuper","containerRef","React","createRef","state","editor","content","initialContent","_inherits","_createClass","key","value","componentDidMount","_this2","current","instance","SquibView","inputContentType","showControls","initialView","titleShow","titleContent","originalSetContent","setContent","bind","newContent","type","saveRevision","setState","onChange","originalSetView","setView","view","onViewChange","events","on","contentType","onContentRendered","onUndoRedo","componentDidUpdate","prevProps","getContent","controlsShow","titleSetContent","componentWillUnmount","off","render","_this$props","className","otherProps","_objectWithoutProperties","_excluded","createElement","_objectSpread","ref","concat","Component","propTypes","defaultProps"],"mappings":"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"}