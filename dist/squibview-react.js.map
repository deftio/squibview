{"version":3,"file":"squibview-react.js","sources":["../src/SquibViewReact.js"],"sourcesContent":["import React from 'https://esm.sh/react@18.2.0';\nimport SquibView from './squibview.esm.min.js';\n\n/**\n * React component wrapper for SquibView\n */\nclass SquibViewReact extends React.Component {\n  constructor(props) {\n    super(props);\n    this.containerRef = React.createRef();\n    this.state = {\n      editor: null\n    };\n  }\n  \n  componentDidMount() {\n    if (this.containerRef.current) {\n      // Initialize SquibView\n      const instance = new SquibView(this.containerRef.current, {\n        initialContent: this.props.initialContent,\n        inputContentType: this.props.inputContentType,\n        showControls: this.props.showControls,\n        initialView: this.props.initialView,\n        titleShow: this.props.titleShow,\n        titleContent: this.props.titleContent\n      });\n      \n      // Listen for editor events and re-emit them as props callbacks\n      instance.events.on('content:rendered', (contentType) => {\n        if (this.props.onContentRendered) {\n          this.props.onContentRendered(contentType);\n        }\n      });\n      \n      instance.events.on('revision:undo', (content, contentType) => {\n        if (this.props.onUndoRedo) {\n          this.props.onUndoRedo('undo', content, contentType);\n        }\n      });\n      \n      instance.events.on('revision:redo', (content, contentType) => {\n        if (this.props.onUndoRedo) {\n          this.props.onUndoRedo('redo', content, contentType);\n        }\n      });\n\n      // Listen for content changes from the editor\n      instance.events.on('content:changed', (newContent, type) => {\n        if (this.props.onChange) {\n          this.props.onChange(newContent, type);\n        }\n      });\n      \n      this.setState({ editor: instance });\n    }\n  }\n  \n  componentDidUpdate(prevProps) {\n    const { editor } = this.state;\n    if (!editor) return;\n\n    // Handle content updates from parent only if they're different from current editor content\n    if (this.props.initialContent !== prevProps.initialContent) {\n      const currentContent = editor.getContent();\n      if (currentContent !== this.props.initialContent) {\n        editor.setContent(\n          this.props.initialContent, \n          this.props.inputContentType || editor.inputContentType, \n          false\n        );\n      }\n    }\n    \n    // Handle content type changes\n    if (this.props.inputContentType !== prevProps.inputContentType) {\n      editor.setContent(\n        editor.getContent(), \n        this.props.inputContentType,\n        false\n      );\n    }\n    \n    // Handle view changes\n    if (this.props.initialView !== prevProps.initialView) {\n      editor.setView(this.props.initialView);\n    }\n    \n    // Handle controls visibility\n    if (this.props.showControls !== prevProps.showControls) {\n      editor.controlsShow(this.props.showControls);\n    }\n    \n    // Handle title visibility\n    if (this.props.titleShow !== prevProps.titleShow) {\n      editor.titleShow(this.props.titleShow);\n    }\n    \n    // Handle title content\n    if (this.props.titleContent !== prevProps.titleContent) {\n      editor.titleSetContent(this.props.titleContent);\n    }\n  }\n  \n  componentWillUnmount() {\n    // Clean up event listeners\n    if (this.state.editor && this.state.editor.events) {\n      this.state.editor.events.off('*');\n    }\n  }\n  \n  render() {\n    const { className, ...otherProps } = this.props;\n    return React.createElement('div', { \n      ref: this.containerRef,\n      className: `squibview-react-container ${className || ''}`,\n      ...otherProps\n    });\n  }\n}\n\n// Add prop types documentation for IDE support\nSquibViewReact.propTypes = {\n  // React's PropTypes are not included directly to avoid dependencies\n  // This is just for documentation purposes\n  /*\n  initialContent: PropTypes.string,\n  inputContentType: PropTypes.string,\n  showControls: PropTypes.bool,\n  initialView: PropTypes.string,\n  titleShow: PropTypes.bool,\n  titleContent: PropTypes.string,\n  className: PropTypes.string,\n  onChange: PropTypes.func,\n  onViewChange: PropTypes.func,\n  onContentRendered: PropTypes.func,\n  onUndoRedo: PropTypes.func\n  */\n};\n\n// Default props\nSquibViewReact.defaultProps = {\n  initialContent: '',\n  inputContentType: 'md',\n  showControls: true,\n  initialView: 'split',\n  titleShow: false,\n  titleContent: '',\n  className: ''\n};\n\nexport default SquibViewReact;"],"names":["SquibViewReact","_React$Component","props","_this","_classCallCheck","_callSuper","containerRef","React","createRef","state","editor","_inherits","_createClass","key","value","componentDidMount","_this2","current","instance","SquibView","initialContent","inputContentType","showControls","initialView","titleShow","titleContent","events","on","contentType","onContentRendered","content","onUndoRedo","newContent","type","onChange","setState","componentDidUpdate","prevProps","currentContent","getContent","setContent","setView","controlsShow","titleSetContent","componentWillUnmount","off","render","_this$props","className","otherProps","_objectWithoutProperties","_excluded","createElement","_objectSpread","ref","concat","Component","propTypes","defaultProps"],"mappings":"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"}