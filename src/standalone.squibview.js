// standalone.js
// this file helps build a complete standalone for squibiew

// Import the libraries from their proper entry points so Rollup bundles them
import hljs from 'highlight.js/lib/core';
import markdownit from 'markdown-it';
import mermaid from 'mermaid';
import Papa from 'papaparse';
import leaflet from 'leaflet';
import * as topojson from 'topojson-client';
import * as THREE from 'three';


// Import highlight.js languages
import javascript from 'highlight.js/lib/languages/javascript';
import python from 'highlight.js/lib/languages/python';
import java from 'highlight.js/lib/languages/java';
import cpp from 'highlight.js/lib/languages/cpp';
import c from 'highlight.js/lib/languages/c';
import css from 'highlight.js/lib/languages/css';
import html from 'highlight.js/lib/languages/xml';
import json from 'highlight.js/lib/languages/json';
import bash from 'highlight.js/lib/languages/bash';
import shell from 'highlight.js/lib/languages/shell';
import sql from 'highlight.js/lib/languages/sql';
import typescript from 'highlight.js/lib/languages/typescript';

// Optionally, import the necessary CSS (if you want them inlined or processed by your CSS plugin)
import 'highlight.js/styles/default.css';
import 'leaflet/dist/leaflet.css';

// Register languages with hljs
hljs.registerLanguage('javascript', javascript);
hljs.registerLanguage('js', javascript);
hljs.registerLanguage('python', python);
hljs.registerLanguage('py', python);
hljs.registerLanguage('java', java);
hljs.registerLanguage('cpp', cpp);
hljs.registerLanguage('c++', cpp);
hljs.registerLanguage('c', c);
hljs.registerLanguage('css', css);
hljs.registerLanguage('html', html);
hljs.registerLanguage('xml', html);
hljs.registerLanguage('json', json);
hljs.registerLanguage('bash', bash);
hljs.registerLanguage('sh', shell);
hljs.registerLanguage('shell', shell);
hljs.registerLanguage('sql', sql);
hljs.registerLanguage('typescript', typescript);
hljs.registerLanguage('ts', typescript);

// In the standalone build, assign them to window so that SquibView (which expects globals) finds them.
window.hljs = hljs;
window.markdownit = markdownit;
window.mermaid = mermaid;
window.Papa = Papa;
window.L = leaflet;
window.topojson = topojson;
window.THREE = THREE;

// Configure Leaflet marker icons for standalone build
if (typeof leaflet !== 'undefined' && leaflet.Icon && leaflet.Icon.Default) {
  // Only modify the default if it hasn't been set already (avoid side effects)
  if (leaflet.Icon.Default.prototype._getIconUrl) {
    delete leaflet.Icon.Default.prototype._getIconUrl;
    leaflet.Icon.Default.mergeOptions({
      iconUrl: 'data:image/png;base64,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',
      iconRetinaUrl: 'data:image/png;base64,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',
      shadowUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYCe2YP4/TMBTH31OaUBBK1agUxMSAhBiYWJgYmJhYEBMLEwMLyxfw/Q0MIBDFQIVAIBSVgEuzZ+fZORylya/pm7CVrGa4c5/fz+/P+139Pwb+wIEhHRguLi7Oz89PT0xMTE5OTuI4jqOJiYkoiiLrOI7N9fh+fHd3d2t1dbVVVdXGP8LJcnNz8/Da2trDJEnu8wAvjw8vg2EYNvPpdBofHR0dzmQyMfnE5GHkgUKYPAmrdS8ej99hMplsF0mm0+msQRaLxXnDrVQqrdbX15+vrKxsU4fPAO5/sVyAg4ODZ+l0Wk9PT0P9K8q5XK5ar9fLhLt/OLGDsyRgwkqH8/PzG7VabRbQzGazpXK5PFupVObm5uY2RkZGtHDo5OTkOVKy5iiOPqb9/f1Pc3Nz70ZHR52cnU6HffH169fPOzs7L4hQJRcLlQSUCYSwWawwDHWytramiYkJ7ezsiFgHSomNjY2NlZWVV7yKWL0wiKWCC2FzKpXS6uqqNjc3+4hdbB7n6XSaQ8R6vS42JVKNbUHICkru7u4K8DCPvMV3TyKPuqVUdBYGFAQkbm9vDwR68PDhKCL3x8fHYvshVDtFJImTBIlls1mdn58PBLm4uNDW1pZyuZza7XYUJCmSRIGyze12W0dHRz+BHB4eaj+Xe3t7ms1mValUtLCwoH7fwuTQdru91Wq1FsPhJEzOuHnzJ5DMQaLRaGhmZkbNZlPb29uanJxUrVaTv4vXJM8GCciXIEmS8E5f/Lv7mJycnP7JQEIgZU3i5ipf2+12M+jdSQ5K9vT0VDs7O2SiRyOOvZEkST5sbGzMJ0mStYNlBivQSmwez6lJqVSStdJsNuUs8k2SVz8k19fXt5PJ5Ap/L0pwDVmYqzC8c7fb1eTkpG7evKn8YrFolpeXt+7du/d2bW3tbSLh5JydnX1rt9uPKpXKo3g8PkSYg0VCgVhisViscrm8urS0tDpI7n+jfjiVsQ/6AAAAAElFTkSuQmCC'
    });
  }
}

// Now import SquibView itself
import SquibView from './squibview.js';
export default SquibView;
